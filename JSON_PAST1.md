
D/HnContentRecognizerManager(31602): getCloudConfigsBundle: cache
I/HiTouch_PressGestureDetector(31602): checkDoublePointerLimit: false
4
D/HnContentRecognizerManager(31602): getCloudConfigsBundle: cache
I/flutter (31602): 📤 发送WebSocket消息: {id: 07y0ftm9zdp96sivky9k, type: cart, data: {action: delete, cart_specification_id: 436-0}, timestamp: 1757593809}
I/flutter (31602): [20:30:09.802] [D] [WebSocketManager] 📤 发送删除菜品消息: 桌台27, 规格ID436-0
I/flutter (31602): [20:30:09.803] [D] [OrderController] 📤 删除菜品已同步到WebSocket: 鸡汤拉面
[WebSocketManager] 📤 发送删除菜品消息: 桌台27, 规格ID436-0
[OrderController] 📤 删除菜品已同步到WebSocket: 鸡汤拉面
I/flutter (31602): [20:30:09.820] [D] [OrderController] 🔢 计算购物车总数量: 2
[OrderController] 🔢 计算购物车总数量: 2
I/flutter (31602): [20:30:09.837] [D] [OrderController] 🔢 计算购物车总数量: 2
2
I/flutter (31602): [20:30:09.838] [D] [OrderController] 🔢 计算购物车总数量: 2
I/flutter (31602): [20:30:09.839] [D] [OrderController] 🔢 计算购物车总数量: 2
2
I/flutter (31602): [20:30:09.840] [D] [OrderController] 🔢 计算购物车总数量: 2
I/flutter (31602): [20:30:09.841] [D] [OrderController] 🔢 计算购物车总数量: 2
[OrderController] 🔢 计算购物车总数量: 2
I/flutter (31602): [20:30:09.841] [D] [OrderController] 🔢 计算购物车总数量: 2
2
I/flutter (31602): [20:30:09.842] [D] [OrderController] 🔢 计算购物车总数量: 2
9
[OrderController] 🔢 计算购物车总数量: 2
I/flutter (31602): 📨 收到WebSocket原始消息: {id: 07y0ftm9zdp96sivky9k, type: cart, data: {action: delete, cart_specification_id: 436-0}, timestamp: 1757593809, table_id: 27, store_id: 1, merchant_id: 1}
I/flutter (31602): [20:30:09.880] [D] [WebSocketManager] 📨 桌台 27 收到服务器消息: cart
I/flutter (31602): [20:30:09.880] [D] [WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
[WebSocketManager] 📨 桌台 27 收到服务器消息: cart
I/flutter (31602): [20:30:09.881] [D] [OrderController] 📦 收到WebSocket消息: {id: 07y0ftm9zdp96sivky9k, type: cart, data: {action: delete, cart_specification_id: 436-0}, timestamp: 1757593809, table_id: 27, store_id: 1, merchant_id: 1}
I/flutter (31602): [20:30:09.881] [D] [OrderController] 📦 消息类型: cart, 数据: {action: delete, cart_specification_id: 436-0}
I/flutter (31602): [20:30:09.881] [D] [OrderController] 🛒 处理购物车消息
I/flutter (31602): [20:30:09.881] [D] [OrderController] 🗑️ 收到服务器购物车删除消息: {action: delete, cart_specification_id: 436-0}
I/flutter (31602): [20:30:09.882] [D] [OrderController] 🔄 准备从服务器刷新购物车数据
I/flutter (31602): [20:30:09.882] [D] [WebSocketManager] 📨 桌台 26 收到服务器消息: cart
I/flutter (31602): [20:30:09.882] [D] [WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
I/flutter (31602): [20:30:09.882] [D] [WebSocketManager] 📨 桌台 26 收到服务器消息: cart
I/flutter (31602): [20:30:09.883] [D] [WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
I/flutter (31602): [20:30:09.883] [D] [WebSocketManager] 📨 桌台 26 收到服务器消息: cart
I/flutter (31602): [20:30:09.883] [D] [WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
I/flutter (31602): [20:30:09.883] [D] [WebSocketManager] 📨 桌台 26 收到服务器消息: cart
I/flutter (31602): [20:30:09.884] [D] [WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
I/flutter (31602): [20:30:09.884] [D] [WebSocketManager] 📨 桌台 26 收到服务器消息: cart
I/flutter (31602): [20:30:09.884] [D] [WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
I/flutter (31602): [20:30:09.884] [D] [WebSocketManager] 📨 桌台 27 收到服务器消息: cart
I/flutter (31602): [20:30:09.885] [D] [WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
I/flutter (31602): 📨 收到WebSocket原始消息: {id: 20250911203009LfxvNW, type: cart_response, data: {code: 501, message: 查询购物车失败, data: {message_id: 07y0ftm9zdp96sivky9k, message_type: cart}}, timestamp: 1757593809, table_id: 27, store_id: 1, merchant_id: 1}
I/flutter (31602): [20:30:09.886] [D] [WebSocketManager] 📨 桌台 27 收到服务器消息: cart_response
I/flutter (31602): [20:30:09.886] [D] [WebSocketManager] 📨 收到服务器二次确认消息: 代码501, 消息查询购物车失败, 原始IDnull
I/flutter (31602): [20:30:09.886] [D] [OrderController] 📦 收到WebSocket消息: {id: 20250911203009LfxvNW, type: cart_response, data: {code: 501, message: 查询购物车失败, data: {message_id: 07y0ftm9zdp96sivky9k, message_type: cart}}, timestamp: 1757593809, table_id: 27, store_id: 1, merchant_id: 1}
I/flutter (31602): [20:30:09.886] [D] [OrderController] 📦 消息类型: cart_response, 数据: {code: 501, message: 查询购物车失败, data: {message_id: 07y0ftm9zdp96sivky9k, message_type: cart}}
I/flutter (31602): [20:30:09.887] [D] [OrderController] 📨 处理购物车响应消息
I/flutter (31602): [20:30:09.887] [D] [OrderController] 📨 收到服务器操作确认消息: {code: 501, message: 查询购物车失败, data: {message_id: 07y0ftm9zdp96sivky9k, message_type: cart}}
I/flutter (31602): [20:30:09.887] [D] [WebSocketManager] 📨 桌台 26 收到服务器消息: cart_response
I/flutter (31602): [20:30:09.888] [D] [WebSocketManager] 📨 收到服务器二次确认消息: 代码501, 消息查询购物车失败, 原始IDnull
I/flutter (31602): [20:30:09.888] [D] [WebSocketManager] 📨 桌台 26 收到服务器消息: cart_response
I/flutter (31602): [20:30:09.888] [D] [WebSocketManager] 📨 收到服务器二次确认消息: 代码501, 消息查询购物车失败, 原始IDnull
I/flutter (31602): [20:30:09.888] [D] [WebSocketManager] 📨 桌台 26 收到服务器消息: cart_response
I/flutter (31602): [20:30:09.888] [D] [WebSocketManager] 📨 收到服务器二次确认消息: 代码501, 消息查询购物车失败, 原始IDnull
I/flutter (31602): [20:30:09.889] [D] [WebSocketManager] 📨 桌台 26 收到服务器消息: cart_response
I/flutter (31602): [20:30:09.889] [D] [WebSocketManager] 📨 收到服务器二次确认消息: 代码501, 消息查询购物车失败, 原始IDnull
I/flutter (31602): [20:30:09.889] [D] [WebSocketManager] 📨 桌台 26 收到服务器消息: cart_response
I/flutter (31602): [20:30:09.889] [D] [WebSocketManager] 📨 收到服务器二次确认消息: 代码501, 消息查询购物车失败, 原始IDnull
I/flutter (31602): [20:30:09.890] [D] [WebSocketManager] 📨 桌台 27 收到服务器消息: cart_response
I/flutter (31602): [20:30:09.890] [D] [WebSocketManager] 📨 收到服务器二次确认消息: 代码501, 消息查询购物车失败, 原始IDnull
I/flutter (31602): 📨 收到WebSocket原始消息: {id: 07y0ftm9zdp96sivky9k, type: cart, data: {action: delete, cart_specification_id: 436-0}, timestamp: 1757593809, table_id: 27, store_id: 1, merchant_id: 1}
I/flutter (31602): [20:30:09.890] [D] [WebSocketManager] 📨 桌台 27 收到服务器消息: cart
I/flutter (31602): [20:30:09.891] [D] [WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
I/flutter (31602): [20:30:09.891] [D] [WebSocketManager] 📨 桌台 26 收到服务器消息: cart
I/flutter (31602): [20:30:09.891] [D] [WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
I/flutter (31602): [20:30:09.891] [D] [WebSocketManager] 📨 桌台 26 收到服务器消息: cart
I/flutter (31602): [20:30:09.892] [D] [WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
I/flutter (31602): [20:30:09.892] [D] [WebSocketManager] 📨 桌台 26 收到服务器消息: cart
I/flutter (31602): [20:30:09.892] [D] [WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
I/flutter (31602): [20:30:09.892] [D] [WebSocketManager] 📨 桌台 26 收到服务器消息: cart
I/flutter (31602): [20:30:09.893] [D] [WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
I/flutter (31602): [20:30:09.893] [D] [WebSocketManager] 📨 桌台 26 收到服务器消息: cart
I/flutter (31602): [20:30:09.893] [D] [WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
I/flutter (31602): [20:30:09.893] [D] [WebSocketManager] 📨 桌台 27 收到服务器消息: cart
I/flutter (31602): [20:30:09.893] [D] [WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
[WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
[OrderController] 📦 消息类型: cart, 数据: {action: delete, cart_specification_id: 436-0}
[OrderController] 🛒 处理购物车消息
[OrderController] 🗑️ 收到服务器购物车删除消息: {action: delete, cart_specification_id: 436-0}
[OrderController] 🔄 准备从服务器刷新购物车数据
[WebSocketManager] 📨 桌台 26 收到服务器消息: cart
[WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
[WebSocketManager] 📨 桌台 26 收到服务器消息: cart
[WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
[WebSocketManager] 📨 桌台 26 收到服务器消息: cart
[WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
[WebSocketManager] 📨 桌台 26 收到服务器消息: cart
[WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
[WebSocketManager] 📨 桌台 26 收到服务器消息: cart
[WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
[WebSocketManager] 📨 桌台 27 收到服务器消息: cart
[WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
[WebSocketManager] 📨 桌台 27 收到服务器消息: cart_response
[WebSocketManager] 📨 收到服务器二次确认消息: 代码501, 消息查询购物车失败, 原始IDnull
[OrderController] 📦 消息类型: cart_response, 数据: {code: 501, message: 查询购物车失败, data: {message_id: 07y0ftm9zdp96sivky9k, message_type: cart}}
[OrderController] 📨 处理购物车响应消息
[OrderController] 📨 收到服务器操作确认消息: {code: 501, message: 查询购物车失败, data: {message_id: 07y0ftm9zdp96sivky9k, message_type: cart}}
[WebSocketManager] 📨 桌台 26 收到服务器消息: cart_response
[WebSocketManager] 📨 收到服务器二次确认消息: 代码501, 消息查询购物车失败, 原始IDnull
[WebSocketManager] 📨 桌台 26 收到服务器消息: cart_response
[WebSocketManager] 📨 收到服务器二次确认消息: 代码501, 消息查询购物车失败, 原始IDnull
[WebSocketManager] 📨 桌台 26 收到服务器消息: cart_response
[WebSocketManager] 📨 收到服务器二次确认消息: 代码501, 消息查询购物车失败, 原始IDnull
[WebSocketManager] 📨 桌台 26 收到服务器消息: cart_response
[WebSocketManager] 📨 收到服务器二次确认消息: 代码501, 消息查询购物车失败, 原始IDnull
[WebSocketManager] 📨 桌台 26 收到服务器消息: cart_response
[WebSocketManager] 📨 收到服务器二次确认消息: 代码501, 消息查询购物车失败, 原始IDnull
[WebSocketManager] 📨 桌台 27 收到服务器消息: cart_response
[WebSocketManager] 📨 收到服务器二次确认消息: 代码501, 消息查询购物车失败, 原始IDnull
[WebSocketManager] 📨 桌台 27 收到服务器消息: cart
[WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
[WebSocketManager] 📨 桌台 26 收到服务器消息: cart
[WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
[WebSocketManager] 📨 桌台 26 收到服务器消息: cart
[WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
[WebSocketManager] 📨 桌台 26 收到服务器消息: cart
[WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
[WebSocketManager] 📨 桌台 26 收到服务器消息: cart
[WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
[WebSocketManager] 📨 桌台 26 收到服务器消息: cart
[WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
[WebSocketManager] 📨 桌台 27 收到服务器消息: cart
[WebSocketManager] 🗑️ 收到服务器菜品删除消息: {action: delete, cart_specification_id: 436-0}
[OrderController] 📦 收到WebSocket消息: {id: 07y0ftm9zdp96sivky9k, type: cart, data: {action: delete, cart_specification_id: 436-0}, timestamp: 1757593809, table_id: 27, store_id: 1, merchant_id: 1}
[OrderController] 📦 收到WebSocket消息: {id: 20250911203009LfxvNW, type: cart_response, data: {code: 501, message: 查询购物车失败, data: {message_id: 07y0ftm9zdp96sivky9k, message_type: cart}}, timestamp: 1757593809, table_id: 27, store_id: 1, merchant_id: 1}
I/flutter (31602): [20:30:10.306] [D] [OrderController] 🔄 WebSocket操作后刷新购物车数据
I/flutter (31602): [20:30:10.308] [D] [OrderController] 🛒 开始加载购物车数据，桌台ID: 27
I/flutter (31602): [20:30:10.308] [D] [OrderController] 🛒 购物车API请求URL: /api/waiter/cart/info?table_id=27
[OrderController] 🔄 WebSocket操作后刷新购物车数据
[OrderController] 🛒 开始加载购物车数据，桌台ID: 27
I/flutter (31602): [20:30:10.315] [D] [AuthService] 获取到用户token: ChCQ_nVvpUKhvJiyMZDF...
[OrderController] 🛒 购物车API请求URL: /api/waiter/cart/info?table_id=27
I/flutter (31602): 🔑 从GetIt获取AuthService成功
I/flutter (31602): 🔑 使用用户token: ChCQ_nVvpUKhvJiyMZDF...
I/flutter (31602): [20:30:10.317] [D] [HTTP] GET http://129.204.154.113:8050/api/waiter/cart/info?table_id=27
I/flutter (31602): [20:30:10.319] [D] [OrderController] 🔢 计算购物车总数量: 2
[AuthService] 获取到用户token: ChCQ_nVvpUKhvJiyMZDF...
[HTTP] GET http://129.204.154.113:8050/api/waiter/cart/info?table_id=27
[OrderController] 🔢 计算购物车总数量: 2
I/flutter (31602): [20:30:10.447] [I] [HTTP] 200 GET http://129.204.154.113:8050/api/waiter/cart/info?table_id=27 (130ms)
[HTTP] 200 GET http://129.204.154.113:8050/api/waiter/cart/info?table_id=27 (130ms)
I/flutter (31602): [20:30:10.466] [D] [HTTP] Response: HttpResultN<dynamic>(Success, code: 0, hasData: true, msg: success)
I/flutter (31602): ✅ Request GET /api/waiter/cart/info - 157ms - Status: 200
I/flutter (31602): 🛒 CartAPI dataJson: {id: 157, table_id: 27, merchant_id: 1, store_id: 1, menu_id: 1, dining_type: 1, quantity: 3, total_price: 0, dishes: [{id: 411, cart_specification_id: 411-0, dish_id: 5, name: 蒸蛋面条, quantity: 1, status: 1, price: 0, menu_price: 0, price_increment: 0, tax_rate: 6, unit_price: 0, image: https://images.unsplash.com/photo-1569718212165-3a8278d5f624?w=400&h=300&fit=crop&crop=center, allergens: [{label: 花生, id: 1, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/huansheng.png}, {label: 坚果类, id: 2, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/jianguo.png}, {label: 海鲜类, id: 3, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/longxia.png}], options_str: , options: null, source: 2, type: 1, waiter_id: 1, customer_id: 0, browser_fingerprint_hash: }, {id: 435, cart_specification_id: 435-0, dish_id: 21, name: 麻辣牛肉面, quantity: 1, status: 1, price: 0, menu_price: 0, price_increment: 0, tax_rate: 6, unit_price: 0, image: https://images.unsplash.com/photo-15697
I/flutter (31602): 🛒 CartAPI dataJson type: _Map<String, dynamic>
I/flutter (31602): 🛒 CartAPI converted model: Instance of 'CartInfoModel'
I/flutter (31602): 🛒 CartAPI model items: [Instance of 'CartItemModel', Instance of 'CartItemModel', Instance of 'CartItemModel']
I/flutter (31602): [20:30:10.468] [D] [OrderController] 🛒 购物车API调用结果: isSuccess=true, code=0, msg=success
I/flutter (31602): [20:30:10.469] [D] [OrderController] 🛒 购物车API原始响应数据 result.data: Instance of 'CartInfoModel'
I/flutter (31602): [20:30:10.469] [D] [OrderController] 🛒 购物车API原始响应数据 result.dataJson: {id: 157, table_id: 27, merchant_id: 1, store_id: 1, menu_id: 1, dining_type: 1, quantity: 3, total_price: 0, dishes: [{id: 411, cart_specification_id: 411-0, dish_id: 5, name: 蒸蛋面条, quantity: 1, status: 1, price: 0, menu_price: 0, price_increment: 0, tax_rate: 6, unit_price: 0, image: https://images.unsplash.com/photo-1569718212165-3a8278d5f624?w=400&h=300&fit=crop&crop=center, allergens: [{label: 花生, id: 1, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/huansheng.png}, {label: 坚果类, id: 2, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/jianguo.png}, {label: 海鲜类, id: 3, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/longxia.png}], options_str: , options: null, source: 2, type: 1, waiter_id: 1, customer_id: 0, browser_fingerprint_hash: }, {id: 435, cart_specification_id: 435-0, dish_id: 21, name: 麻辣牛肉面, quantity: 1, status: 1, price: 0, menu_price: 0, price_increment: 0, ta
I/flutter (31602): [20:30:10.470] [D] [OrderController] 🛒 购物车API hasData: true
I/flutter (31602): [20:30:10.470] [D] [OrderController] ✅ 购物车数据加载成功: 3 个商品
I/flutter (31602): [20:30:10.471] [D] [OrderController] 🛒 购物车对象类型: CartInfoModel
I/flutter (31602): [20:30:10.471] [D] [OrderController] 🛒 购物车items字段: [Instance of 'CartItemModel', Instance of 'CartItemModel', Instance of 'CartItemModel']
I/flutter (31602): [20:30:10.472] [D] [OrderController] 🛒 商品1: 蒸蛋面条 x1 ￥0.0
I/flutter (31602): [20:30:10.472] [D] [OrderController] 🛒 商品2: 麻辣牛肉面 x1 ￥0.0
I/flutter (31602): [20:30:10.472] [D] [OrderController] 🛒 商品3: 鸡汤拉面 x1 ￥0.0
I/flutter (31602): [20:30:10.473] [D] [OrderController] 🔄 开始转换购物车数据，共3个商品，当前菜品列表有36个菜品
I/flutter (31602): [20:30:10.473] [D] [OrderController] 🔄 转换购物车商品: 蒸蛋面条 (ID: 5) x1
I/flutter (31602): [20:30:10.474] [D] [OrderController] ✅ 找到对应菜品: 蒸蛋面条
I/flutter (31602): [20:30:10.474] [D] [OrderController] ✅ 添加到新购物车: 蒸蛋面条 x1
I/flutter (31602): [20:30:10.474] [D] [OrderController] 🔄 转换购物车商品: 麻辣牛肉面 (ID: 21) x1
I/flutter (31602): [20:30:10.475] [D] [OrderController] ✅ 找到对应菜品: 麻辣牛肉面
I/flutter (31602): [20:30:10.475] [D] [OrderController] ✅ 添加到新购物车: 麻辣牛肉面 x1
I/flutter (31602): [20:30:10.476] [D] [OrderController] 🔄 转换购物车商品: 鸡汤拉面 (ID: 22) x1
I/flutter (31602): [20:30:10.476] [D] [OrderController] ✅ 找到对应菜品: 鸡汤拉面
I/flutter (31602): [20:30:10.476] [D] [OrderController] ✅ 添加到新购物车: 鸡汤拉面 x1
I/flutter (31602): [20:30:10.477] [D] [OrderController] 🔢 计算购物车总数量: 2
I/flutter (31602): [20:30:10.477] [D] [OrderController] 🔢 购物车数据对比 - 旧数量: 2, 新数量: 3
[HTTP] Response: HttpResultN<dynamic>(Success, code: 0, hasData: true, msg: success)
I/flutter (31602): [20:30:10.477] [D] [OrderController] ✅ 购物车数据已更新: 3 种商品，总数量: 3
I/flutter (31602): [20:30:10.478] [D] [OrderController] 🔢 计算购物车总数量: 3
[OrderController] 🛒 购物车API调用结果: isSuccess=true, code=0, msg=success
[OrderController] 🛒 购物车API原始响应数据 result.data: Instance of 'CartInfoModel'
I/flutter (31602): [20:30:10.484] [D] [OrderController] 🔢 计算购物车总数量: 3
[OrderController] 🛒 购物车API hasData: true
[OrderController] ✅ 购物车数据加载成功: 3 个商品
3
I/flutter (31602): [20:30:10.485] [D] [OrderController] 🔢 计算购物车总数量: 3
2
I/flutter (31602): [20:30:10.486] [D] [OrderController] 🔢 计算购物车总数量: 3
3
I/flutter (31602): [20:30:10.487] [D] [OrderController] 🔢 计算购物车总数量: 3
I/flutter (31602): [20:30:10.488] [D] [OrderController] 🔢 计算购物车总数量: 3
[OrderController] 🛒 购物车对象类型: CartInfoModel
[OrderController] 🛒 购物车items字段: [Instance of 'CartItemModel', Instance of 'CartItemModel', Instance of 'CartItemModel']
[OrderController] 🛒 商品1: 蒸蛋面条 x1 ￥0.0
[OrderController] 🛒 商品2: 麻辣牛肉面 x1 ￥0.0
[OrderController] 🛒 商品3: 鸡汤拉面 x1 ￥0.0
[OrderController] 🔄 开始转换购物车数据，共3个商品，当前菜品列表有36个菜品
[OrderController] 🔄 转换购物车商品: 蒸蛋面条 (ID: 5) x1
[OrderController] ✅ 找到对应菜品: 蒸蛋面条
[OrderController] ✅ 添加到新购物车: 蒸蛋面条 x1
[OrderController] 🔄 转换购物车商品: 麻辣牛肉面 (ID: 21) x1
[OrderController] ✅ 找到对应菜品: 麻辣牛肉面
[OrderController] ✅ 添加到新购物车: 麻辣牛肉面 x1
[OrderController] 🔄 转换购物车商品: 鸡汤拉面 (ID: 22) x1
[OrderController] ✅ 找到对应菜品: 鸡汤拉面
[OrderController] ✅ 添加到新购物车: 鸡汤拉面 x1
[OrderController] 🔢 计算购物车总数量: 2
[OrderController] 🔢 购物车数据对比 - 旧数量: 2, 新数量: 3
[OrderController] ✅ 购物车数据已更新: 3 种商品，总数量: 3
11
[OrderController] 🔢 计算购物车总数量: 3
[OrderController] 🛒 购物车API原始响应数据 result.dataJson: {id: 157, table_id: 27, merchant_id: 1, store_id: 1, menu_id: 1, dining_type: 1, quantity: 3, total_price: 0, dishes: [{id: 411, cart_specification_id: 411-0, dish_id: 5, name: 蒸蛋面条, quantity: 1, status: 1, price: 0, menu_price: 0, price_increment: 0, tax_rate: 6, unit_price: 0, image: https://images.unsplash.com/photo-1569718212165-3a8278d5f624?w=400&h=300&fit=crop&crop=center, allergens: [{label: 花生, id: 1, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/huansheng.png}, {label: 坚果类, id: 2, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/jianguo.png}, {label: 海鲜类, id: 3, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/longxia.png}], options_str: , options: null, source: 2, type: 1, waiter_id: 1, customer_id: 0, browser_fingerprint_hash: }, {id: 435, cart_specification_id: 435-0, dish_id: 21, name: 麻辣牛肉面, quantity: 1, status: 1, price: 0, menu_price: 0, price_increment: 0, tax_rate: 6, unit_price: 0, image: https://images.unsplash.com/photo-1569718212165-3a8278d5f624?w=400&h=300&fit=crop&crop=center, allergens: [{label: 花生, id: 1, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/huansheng.png}, {label: 坚果类, id: 2, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/jianguo.png}, {label: 海鲜类, id: 3, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/longxia.png}], options_str: , options: null, source: 2, type: 1, waiter_id: 1, customer_id: 0, browser_fingerprint_hash: }, {id: 436, cart_specification_id: 436-0, dish_id: 22, name: 鸡汤拉面, quantity: 1, status: 1, price: 0, menu_price: 0, price_increment: 0, tax_rate: 6, unit_price: 0, image: https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=400&h=300&fit=crop&crop=center, allergens: [{label: 花生, id: 1, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/huansheng.png}, {label: 坚果类, id: 2, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/jianguo.png}, {label: 海鲜类, id: 3, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/longxia.png}], options_str: , options: null, source: 2, type: 1, waiter_id: 1, customer_id: 0, browser_fingerprint_hash: }]}
I/flutter (31602): [20:30:10.580] [D] [OrderController] 🔄 延迟刷新UI，确保购物车显示更新
[OrderController] 🔄 延迟刷新UI，确保购物车显示更新
I/flutter (31602): [20:30:10.584] [D] [OrderController] 🔢 计算购物车总数量: 3
[OrderController] 🔢 计算购物车总数量: 3
I/flutter (31602): [20:30:10.601] [D] [OrderController] 🔢 计算购物车总数量: 3
I/flutter (31602): [20:30:10.602] [D] [OrderController] 🔢 计算购物车总数量: 3
I/flutter (31602): [20:30:10.603] [D] [OrderController] 🔢 计算购物车总数量: 3
[OrderController] 🔢 计算购物车总数量: 3
I/flutter (31602): [20:30:10.604] [D] [OrderController] 🔢 计算购物车总数量: 3
2
[OrderController] 🔢 计算购物车总数量: 3
I/flutter (31602): [20:30:10.604] [D] [OrderController] 🔢 计算购物车总数量: 3
I/flutter (31602): [20:30:10.605] [D] [OrderController] 🔢 计算购物车总数量: 3
I/flutter (31602): [20:30:10.606] [D] [OrderController] 🔢 计算购物车总数量: 3
[OrderController] 🔢 计算购物车总数量: 3
I/flutter (31602): [20:30:10.606] [D] [OrderController] 🔢 计算购物车总数量: 3
2
I/flutter (31602): [20:30:10.607] [D] [OrderController] 🔢 计算购物车总数量: 3
6
[OrderController] 🔢 计算购物车总数量: 3
I/flutter (31602): [20:30:10.885] [D] [OrderController] 🔄 执行购物车数据刷新
I/flutter (31602): [20:30:10.886] [D] [OrderController] 🛒 开始加载购物车数据，桌台ID: 27
I/flutter (31602): [20:30:10.887] [D] [OrderController] 🛒 购物车API请求URL: /api/waiter/cart/info?table_id=27
[OrderController] 🔄 执行购物车数据刷新
I/flutter (31602): [20:30:10.892] [D] [AuthService] 获取到用户token: ChCQ_nVvpUKhvJiyMZDF...
I/flutter (31602): 🔑 从GetIt获取AuthService成功
I/flutter (31602): 🔑 使用用户token: ChCQ_nVvpUKhvJiyMZDF...
[OrderController] 🛒 开始加载购物车数据，桌台ID: 27
I/flutter (31602): [20:30:10.894] [D] [HTTP] GET http://129.204.154.113:8050/api/waiter/cart/info?table_id=27
[OrderController] 🛒 购物车API请求URL: /api/waiter/cart/info?table_id=27
[AuthService] 获取到用户token: ChCQ_nVvpUKhvJiyMZDF...
I/flutter (31602): [20:30:10.900] [D] [OrderController] 🔢 计算购物车总数量: 3
[HTTP] GET http://129.204.154.113:8050/api/waiter/cart/info?table_id=27
[OrderController] 🔢 计算购物车总数量: 3
I/flutter (31602): [20:30:10.960] [I] [HTTP] 200 GET http://129.204.154.113:8050/api/waiter/cart/info?table_id=27 (66ms)
[HTTP] 200 GET http://129.204.154.113:8050/api/waiter/cart/info?table_id=27 (66ms)
I/flutter (31602): [20:30:10.962] [D] [HTTP] Response: HttpResultN<dynamic>(Success, code: 0, hasData: true, msg: success)
I/flutter (31602): ✅ Request GET /api/waiter/cart/info - 75ms - Status: 200
I/flutter (31602): 🛒 CartAPI dataJson: {id: 157, table_id: 27, merchant_id: 1, store_id: 1, menu_id: 1, dining_type: 1, quantity: 3, total_price: 0, dishes: [{id: 411, cart_specification_id: 411-0, dish_id: 5, name: 蒸蛋面条, quantity: 1, status: 1, price: 0, menu_price: 0, price_increment: 0, tax_rate: 6, unit_price: 0, image: https://images.unsplash.com/photo-1569718212165-3a8278d5f624?w=400&h=300&fit=crop&crop=center, allergens: [{label: 花生, id: 1, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/huansheng.png}, {label: 坚果类, id: 2, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/jianguo.png}, {label: 海鲜类, id: 3, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/longxia.png}], options_str: , options: null, source: 2, type: 1, waiter_id: 1, customer_id: 0, browser_fingerprint_hash: }, {id: 435, cart_specification_id: 435-0, dish_id: 21, name: 麻辣牛肉面, quantity: 1, status: 1, price: 0, menu_price: 0, price_increment: 0, tax_rate: 6, unit_price: 0, image: https://images.unsplash.com/photo-15697
[HTTP] Response: HttpResultN<dynamic>(Success, code: 0, hasData: true, msg: success)
I/flutter (31602): 🛒 CartAPI dataJson type: _Map<String, dynamic>
I/flutter (31602): 🛒 CartAPI converted model: Instance of 'CartInfoModel'
[OrderController] 🛒 购物车API调用结果: isSuccess=true, code=0, msg=success
I/flutter (31602): 🛒 CartAPI model items: [Instance of 'CartItemModel', Instance of 'CartItemModel', Instance of 'CartItemModel']
[OrderController] 🛒 购物车API原始响应数据 result.data: Instance of 'CartInfoModel'
I/flutter (31602): [20:30:10.965] [D] [OrderController] 🛒 购物车API调用结果: isSuccess=true, code=0, msg=success
I/flutter (31602): [20:30:10.966] [D] [OrderController] 🛒 购物车API原始响应数据 result.data: Instance of 'CartInfoModel'
I/flutter (31602): [20:30:10.966] [D] [OrderController] 🛒 购物车API原始响应数据 result.dataJson: {id: 157, table_id: 27, merchant_id: 1, store_id: 1, menu_id: 1, dining_type: 1, quantity: 3, total_price: 0, dishes: [{id: 411, cart_specification_id: 411-0, dish_id: 5, name: 蒸蛋面条, quantity: 1, status: 1, price: 0, menu_price: 0, price_increment: 0, tax_rate: 6, unit_price: 0, image: https://images.unsplash.com/photo-1569718212165-3a8278d5f624?w=400&h=300&fit=crop&crop=center, allergens: [{label: 花生, id: 1, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/huansheng.png}, {label: 坚果类, id: 2, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/jianguo.png}, {label: 海鲜类, id: 3, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/longxia.png}], options_str: , options: null, source: 2, type: 1, waiter_id: 1, customer_id: 0, browser_fingerprint_hash: }, {id: 435, cart_specification_id: 435-0, dish_id: 21, name: 麻辣牛肉面, quantity: 1, status: 1, price: 0, menu_price: 0, price_increment: 0, ta
I/flutter (31602): [20:30:10.967] [D] [OrderController] 🛒 购物车API hasData: true
I/flutter (31602): [20:30:10.968] [D] [OrderController] ✅ 购物车数据加载成功: 3 个商品
I/flutter (31602): [20:30:10.968] [D] [OrderController] 🛒 购物车对象类型: CartInfoModel
I/flutter (31602): [20:30:10.969] [D] [OrderController] 🛒 购物车items字段: [Instance of 'CartItemModel', Instance of 'CartItemModel', Instance of 'CartItemModel']
I/flutter (31602): [20:30:10.969] [D] [OrderController] 🛒 商品1: 蒸蛋面条 x1 ￥0.0
I/flutter (31602): [20:30:10.970] [D] [OrderController] 🛒 商品2: 麻辣牛肉面 x1 ￥0.0
I/flutter (31602): [20:30:10.970] [D] [OrderController] 🛒 商品3: 鸡汤拉面 x1 ￥0.0
I/flutter (31602): [20:30:10.971] [D] [OrderController] 🔄 开始转换购物车数据，共3个商品，当前菜品列表有36个菜品
I/flutter (31602): [20:30:10.971] [D] [OrderController] 🔄 转换购物车商品: 蒸蛋面条 (ID: 5) x1
I/flutter (31602): [20:30:10.972] [D] [OrderController] ✅ 找到对应菜品: 蒸蛋面条
I/flutter (31602): [20:30:10.973] [D] [OrderController] ✅ 添加到新购物车: 蒸蛋面条 x1
I/flutter (31602): [20:30:10.973] [D] [OrderController] 🔄 转换购物车商品: 麻辣牛肉面 (ID: 21) x1
I/flutter (31602): [20:30:10.974] [D] [OrderController] ✅ 找到对应菜品: 麻辣牛肉面
[OrderController] 🛒 购物车API hasData: true
[OrderController] ✅ 购物车数据加载成功: 3 个商品
[OrderController] 🛒 购物车对象类型: CartInfoModel
[OrderController] 🛒 购物车items字段: [Instance of 'CartItemModel', Instance of 'CartItemModel', Instance of 'CartItemModel']
[OrderController] 🛒 商品1: 蒸蛋面条 x1 ￥0.0
[OrderController] 🛒 商品2: 麻辣牛肉面 x1 ￥0.0
[OrderController] 🛒 商品3: 鸡汤拉面 x1 ￥0.0
I/flutter (31602): [20:30:10.974] [D] [OrderController] ✅ 添加到新购物车: 麻辣牛肉面 x1
I/flutter (31602): [20:30:10.975] [D] [OrderController] 🔄 转换购物车商品: 鸡汤拉面 (ID: 22) x1
I/flutter (31602): [20:30:10.975] [D] [OrderController] ✅ 找到对应菜品: 鸡汤拉面
I/flutter (31602): [20:30:10.976] [D] [OrderController] ✅ 添加到新购物车: 鸡汤拉面 x1
I/flutter (31602): [20:30:10.976] [D] [OrderController] 🔢 计算购物车总数量: 3
I/flutter (31602): [20:30:10.976] [D] [OrderController] 🔢 购物车数据对比 - 旧数量: 3, 新数量: 3
I/flutter (31602): [20:30:10.977] [D] [OrderController] ✅ 购物车数据已更新: 3 种商品，总数量: 3
[OrderController] 🔄 开始转换购物车数据，共3个商品，当前菜品列表有36个菜品
[OrderController] 🔄 转换购物车商品: 蒸蛋面条 (ID: 5) x1
[OrderController] ✅ 找到对应菜品: 蒸蛋面条
[OrderController] ✅ 添加到新购物车: 蒸蛋面条 x1
I/flutter (31602): [20:30:10.978] [D] [OrderController] 🔢 计算购物车总数量: 3
[OrderController] 🔄 转换购物车商品: 麻辣牛肉面 (ID: 21) x1
[OrderController] ✅ 找到对应菜品: 麻辣牛肉面
[OrderController] ✅ 添加到新购物车: 麻辣牛肉面 x1
2
I/flutter (31602): [20:30:10.985] [D] [OrderController] 🔢 计算购物车总数量: 3
[OrderController] 🔄 转换购物车商品: 鸡汤拉面 (ID: 22) x1
[OrderController] ✅ 找到对应菜品: 鸡汤拉面
[OrderController] ✅ 添加到新购物车: 鸡汤拉面 x1
[OrderController] 🔢 计算购物车总数量: 3
[OrderController] 🔢 购物车数据对比 - 旧数量: 3, 新数量: 3
[OrderController] ✅ 购物车数据已更新: 3 种商品，总数量: 3
4
[OrderController] 🔢 计算购物车总数量: 3
2
I/flutter (31602): [20:30:10.986] [D] [OrderController] 🔢 计算购物车总数量: 3
3
I/flutter (31602): [20:30:10.987] [D] [OrderController] 🔢 计算购物车总数量: 3
3
I/flutter (31602): [20:30:10.988] [D] [OrderController] 🔢 计算购物车总数量: 3
7
[OrderController] 🔢 计算购物车总数量: 3
[OrderController] 🛒 购物车API原始响应数据 result.dataJson: {id: 157, table_id: 27, merchant_id: 1, store_id: 1, menu_id: 1, dining_type: 1, quantity: 3, total_price: 0, dishes: [{id: 411, cart_specification_id: 411-0, dish_id: 5, name: 蒸蛋面条, quantity: 1, status: 1, price: 0, menu_price: 0, price_increment: 0, tax_rate: 6, unit_price: 0, image: https://images.unsplash.com/photo-1569718212165-3a8278d5f624?w=400&h=300&fit=crop&crop=center, allergens: [{label: 花生, id: 1, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/huansheng.png}, {label: 坚果类, id: 2, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/jianguo.png}, {label: 海鲜类, id: 3, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/longxia.png}], options_str: , options: null, source: 2, type: 1, waiter_id: 1, customer_id: 0, browser_fingerprint_hash: }, {id: 435, cart_specification_id: 435-0, dish_id: 21, name: 麻辣牛肉面, quantity: 1, status: 1, price: 0, menu_price: 0, price_increment: 0, tax_rate: 6, unit_price: 0, image: https://images.unsplash.com/photo-1569718212165-3a8278d5f624?w=400&h=300&fit=crop&crop=center, allergens: [{label: 花生, id: 1, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/huansheng.png}, {label: 坚果类, id: 2, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/jianguo.png}, {label: 海鲜类, id: 3, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/longxia.png}], options_str: , options: null, source: 2, type: 1, waiter_id: 1, customer_id: 0, browser_fingerprint_hash: }, {id: 436, cart_specification_id: 436-0, dish_id: 22, name: 鸡汤拉面, quantity: 1, status: 1, price: 0, menu_price: 0, price_increment: 0, tax_rate: 6, unit_price: 0, image: https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=400&h=300&fit=crop&crop=center, allergens: [{label: 花生, id: 1, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/huansheng.png}, {label: 坚果类, id: 2, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/jianguo.png}, {label: 海鲜类, id: 3, icon: https://testkt.oss-cn-shanghai.aliyuncs.com/longxia.png}], options_str: , options: null, source: 2, type: 1, waiter_id: 1, customer_id: 0, browser_fingerprint_hash: }]}
I/flutter (31602): [20:30:11.080] [D] [OrderController] 🔄 延迟刷新UI，确保购物车显示更新
[OrderController] 🔄 延迟刷新UI，确保购物车显示更新
[OrderController] 🔢 计算购物车总数量: 3
I/flutter (31602): [20:30:11.083] [D] [OrderController] 🔢 计算购物车总数量: 3
2
I/flutter (31602): [20:30:11.100] [D] [OrderController] 🔢 计算购物车总数量: 3
I/flutter (31602): [20:30:11.101] [D] [OrderController] 🔢 计算购物车总数量: 3
2
I/flutter (31602): [20:30:11.102] [D] [OrderController] 🔢 计算购物车总数量: 3
2
I/flutter (31602): [20:30:11.103] [D] [OrderController] 🔢 计算购物车总数量: 3
I/flutter (31602): [20:30:11.104] [D] [OrderController] 🔢 计算购物车总数量: 3
[OrderController] 🔢 计算购物车总数量: 3
I/flutter (31602): [20:30:11.104] [D] [OrderController] 🔢 计算购物车总数量: 3
I/flutter (31602): [20:30:11.105] [D] [OrderController] 🔢 计算购物车总数量: 3
9
[OrderController] 🔢 计算购物车总数量: 3